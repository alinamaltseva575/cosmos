{{define "admin_user_form"}}
<div class="admin-header">
    <h1>{{if .User.ID}}‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è{{else}}‚ûï –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è{{end}}</h1>
    <p>{{if .User.ID}}–ò–∑–º–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è{{else}}–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è{{end}}</p>
</div>

<div class="admin-actions-bar">
    <a href="/admin/users" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</a>
</div>

{{if .Error}}
<div class="error-message">
    <strong>–û—à–∏–±–∫–∞:</strong> {{.Error}}
</div>
{{end}}

{{if .Success}}
<div class="success-message">
    ‚úÖ {{.Success}}
</div>
{{end}}

<form method="POST"
      action="{{if .User.ID}}/admin/users/edit/{{.User.ID}}{{else}}/admin/users/new{{end}}"
      class="admin-form">

    <div class="form-row">
        <div class="form-group">
            <label for="username">–õ–æ–≥–∏–Ω *</label>
            <input type="text" id="username" name="username" required
                   value="{{.User.Username}}" placeholder="username">
            <small class="form-text">–£–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –¥–ª—è –≤—Ö–æ–¥–∞</small>
        </div>

        <div class="form-group">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" required
                   value="{{.User.Email}}" placeholder="user@example.com">
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="role">–†–æ–ª—å *</label>
            <select id="role" name="role" required>
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</option>
                <option value="user" {{if eq .User.Role "user"}}selected{{end}}>üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                <option value="admin" {{if eq .User.Role "admin"}}selected{{end}}>üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
            </select>
        </div>

        <div class="form-group">
            <label for="password">
                {{if .User.ID}}–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å{{else}}–ü–∞—Ä–æ–ª—å *{{end}}
            </label>
            <input type="password" id="password" name="password"
                   {{if not .User.ID}}required{{end}}
                   placeholder="{{if .User.ID}}–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å{{else}}–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤{{end}}">
            <small class="form-text">
                {{if .User.ID}}
                –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
                {{else}}
                –ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤
                {{end}}
            </small>
        </div>
    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary">
            {{if .User.ID}}üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è{{else}}‚ûï –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è{{end}}
        </button>
        <a href="/admin/users" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</a>

        {{if .User.ID}}
            {{if ne .User.ID 1}}
            <a href="/admin/users/{{.User.ID}}/delete"
               class="btn btn-danger"
               onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{.User.Username}}?')">
                üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            </a>
            {{else}}
            <span class="form-text" style="color: #ff9800; margin-left: 15px;">
                ‚ö†Ô∏è –ì–ª–∞–≤–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å
            </span>
            {{end}}
        {{end}}
    </div>
</form>

{{if .User.ID}}
<div class="admin-info">
    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</h3>
    <ul>
        <li>ID: {{.User.ID}}</li>
        <li>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: {{.User.CreatedAt.Format "02.01.2006 15:04"}}</li>
        <li>–†–æ–ª—å:
            <span class="badge {{if eq .User.Role "admin"}}admin-badge{{else}}user-badge{{end}}">
                {{if eq .User.Role "admin"}}üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä{{else}}üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å{{end}}
            </span>
        </li>
    </ul>
</div>
{{end}}
{{end}}
