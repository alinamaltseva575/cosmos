{{define "planets"}}
<section class="hero">
    <h1>üåç –ü–ª–∞–Ω–µ—Ç—ã</h1>
    <p>–ò—Å—Å–ª–µ–¥—É–π—Ç–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –ø–ª–∞–Ω–µ—Ç –Ω–∞—à–µ–π –≤—Å–µ–ª–µ–Ω–Ω–æ–π</p>
</section>

<section class="filters">
    <div class="filter-section">
        <h3>–§–∏–ª—å—Ç—Ä—ã</h3>
        <div class="filter-buttons">
            <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
            <button class="filter-btn" data-filter="earthlike">
                –ó–µ–º–ª–µ–ø–æ–¥–æ–±–Ω—ã–µ
            </button>
            <button class="filter-btn" data-filter="gasgiant">
                –ì–∞–∑–æ–≤—ã–µ –≥–∏–≥–∞–Ω—Ç—ã
            </button>
            <button class="filter-btn" data-filter="habitable">
                –û–±–∏—Ç–∞–µ–º—ã–µ
            </button>
        </div>
    </div>
</section>

<section class="planets-list">
    {{if .Planets}}
    <div class="cards-grid">
        {{range .Planets}}
        <div
            class="card planet-card"
            data-type="{{.Type}}"
            data-habitable="{{.IsHabitable}}"
        >
            <div class="card-header">
                <h3>{{.Name}}</h3>
                <span class="planet-type">{{.Type}}</span>
            </div>
            <div class="card-content">
                <div class="planet-stats">
                    <div class="stat">
                        <span class="stat-label">–î–∏–∞–º–µ—Ç—Ä:</span>
                        <span class="stat-value">{{.DiameterKm}} –∫–º</span>
                    </div>
                    {{if .GalaxyName}}
                    <div class="stat">
                        <span class="stat-label">–ì–∞–ª–∞–∫—Ç–∏–∫–∞:</span>
                        <span class="stat-value">{{.GalaxyName}}</span>
                    </div>
                    {{end}}
                    <div class="stat">
                        <span class="stat-label">–ñ–∏–∑–Ω—å:</span>
                        <span class="stat-value">
                            {{if .HasLife}}üå± –ï—Å—Ç—å{{else}}‚ùå –ù–µ—Ç{{end}}
                        </span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">–û–±–∏—Ç–∞–µ–º–∞:</span>
                        <span class="stat-value">
                            {{if .IsHabitable}}‚úÖ –î–∞{{else}}‚ùå –ù–µ—Ç{{end}}
                        </span>
                    </div>
                </div>
                <p class="description">{{.Description}}</p>
            </div>
            <div class="card-footer">
                <a href="/planets/{{.ID}}" class="btn-small">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
            </div>
        </div>
        {{end}}
    </div>
    {{else}}
    <div class="empty-state">
        <p>–ü–ª–∞–Ω–µ—Ç—ã –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.</p>
    </div>
    {{end}}
</section>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const filterButtons = document.querySelectorAll(".filter-btn");
        const planetCards = document.querySelectorAll(".planet-card");

        filterButtons.forEach((button) => {
            button.addEventListener("click", function () {
                // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
                filterButtons.forEach((btn) => btn.classList.remove("active"));
                // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Ç–µ–∫—É—â–µ–π –∫–Ω–æ–ø–∫–µ
                this.classList.add("active");

                const filter = this.dataset.filter;

                // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫
                planetCards.forEach((card) => {
                    const type = card.dataset.type;
                    const habitable = card.dataset.habitable === "true";

                    let show = false;

                    switch (filter) {
                        case "all":
                            show = true;
                            break;
                        case "earthlike":
                            show = type.includes("–∑–µ–º–ª–µ–ø–æ–¥–æ–±");
                            break;
                        case "gasgiant":
                            show = type.includes("–≥–∞–∑–æ–≤—ã–π");
                            break;
                        case "habitable":
                            show = habitable === true;
                            break;
                    }

                    card.style.display = show ? "block" : "none";
                });
            });
        });
    });
</script>
{{end}}
